<script lang="ts">
    import {
        showProfile,
        showContent,
        showWeather,
        toggleShowContent,
        toggleShowProfile,
        toggleShowWeather
    } from "$lib/store/showContentStore";
    import StartMenu from "./StartMenu.svelte";
    import Clock from "./clock/Clock.svelte";

    let showStartMenu = false;
    let color = "#000000";

    const toggleStartMenu = () => {
        showStartMenu = !showStartMenu;
    }
</script>

<div class="taskbar">
    <button class="start-button" on:click={toggleStartMenu} class:active={showStartMenu}>
        <svg class="windows-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="24px" height="24px">
            <path fill="#F25022" d="M6 6h18v18H6z"/>
            <path fill="#7FBA00" d="M24 6h18v18H24z"/>
            <path fill="#00A4EF" d="M6 24h18v18H6z"/>
            <path fill="#FFB900" d="M24 24h18v18H24z"/>
        </svg>
        Start
    </button>
    <StartMenu visible={showStartMenu}/>
    <div class="task-items">
        <button on:click={toggleShowProfile} class:active={$showProfile}>
            <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24px" height="24px">
                <circle cx="12" cy="8" r="4" fill="#000"/>
                <path d="M12 12c-4.418 0-8 3.582-8 8h16c0-4.418-3.582-8-8-8z" fill="#000"/>
            </svg>
        </button>
        <button on:click={toggleShowWeather} class:active={$showWeather}>
            <svg width="24px" height="24px" viewBox="0 0 48 48" version="1.1" xmlns="http://www.w3.org/2000/svg">
                <g id="🔍-Product-Icons" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                    <g id="ic_fluent_weather_partly_cloudy_day_48_regular" fill="#212121" fill-rule="nonzero">
                        <path d="M25.9946681,15.9979653 C32.3317303,15.9979653 35.9266378,20.192546 36.4494667,25.258218 L36.6093992,25.2582128 C40.6875585,25.2582128 43.9935599,28.5556605 43.9935599,32.6232684 C43.9935599,36.6908763 40.6875585,39.9883241 36.6093992,39.9883241 L15.379937,39.9883241 C11.3017776,39.9883241 7.99577625,36.6908763 7.99577625,32.6232684 C7.99577625,28.5556605 11.3017776,25.2582128 15.379982,25.2582128 L15.5398695,25.258218 C16.0657398,20.1592507 19.6576059,15.9979653 25.9946681,15.9979653 Z M25.9946681,18.4931447 C21.7336129,18.4931447 18.0196328,21.9410973 18.0196328,26.7037158 C18.0196328,27.4583441 17.3635001,28.0504937 16.6121978,28.0504691 L15.1916137,28.0504227 C12.5975432,28.0504227 10.4946336,30.164248 10.4946336,32.7717837 C10.4946336,35.3793193 12.5975432,37.4931447 15.1916137,37.4931447 L36.7977225,37.4931447 C39.391793,37.4931447 41.4947026,35.3793193 41.4947026,32.7717837 C41.4947026,30.164248 39.391793,28.0504227 36.7977683,28.0504227 L35.3771384,28.0504691 C34.625836,28.0504937 33.9697034,27.4583441 33.9697034,26.7037158 C33.9697034,21.8800028 30.2557233,18.4931447 25.9946681,18.4931447 Z M8.70422467,24.2917267 C8.9506205,24.8865788 8.70119556,25.5631004 8.1462357,25.8619008 L8.03122631,25.9164884 L5.71974598,26.8782395 C5.08523704,27.1410617 4.35780641,26.8397501 4.0949842,26.2052411 C3.84858838,25.610389 4.09801332,24.9338674 4.65297318,24.635067 L4.76798257,24.5804794 L7.0794629,23.6187283 C7.71397184,23.3559061 8.44140247,23.6572177 8.70422467,24.2917267 Z M21.704105,14.6503748 L21.6431187,14.6699626 C20.7184262,14.9718972 19.8590163,15.3719694 19.0721845,15.8601147 C17.7639888,15.3066324 16.2427216,15.2576631 14.8261683,15.8444187 C12.0198231,17.0068449 10.6871635,20.2241699 11.8495897,23.030515 C11.9630937,23.3045377 12.0961897,23.5645098 12.2465822,23.8094804 C11.4878406,24.0806062 10.7743364,24.4478596 10.1204215,24.896434 C9.94374308,24.5936272 9.78573195,24.2752892 9.64788279,23.9424919 C7.98178564,19.9201776 9.89187707,15.3088089 13.9141914,13.6427118 C16.5986709,12.530764 19.545526,13.0117164 21.704105,14.6503748 Z M5.57601758,14.8302505 L5.70300306,14.8760225 L8.02181542,15.8648663 C8.65161103,16.1309846 8.95369294,16.8602748 8.69653424,17.4937816 C8.45651945,18.0850546 7.81417343,18.3839134 7.21754687,18.2047693 L7.09056139,18.1589973 L4.77174903,17.1701536 C4.14195341,16.9040353 3.83987151,16.1747451 4.09703021,15.5412383 C4.337045,14.9499652 4.97939102,14.6511064 5.57601758,14.8302505 Z M12.9443806,8.65660546 L12.9992519,8.77221241 L13.9597026,11.0781337 C14.2238904,11.7159395 13.9210132,12.4471497 13.2832075,12.7113374 C12.6852647,12.9590135 12.005228,12.7082926 11.7048751,12.1504493 L11.6500038,12.0348423 L10.6895531,9.72892099 C10.4253653,9.09111527 10.7282425,8.35990507 11.3660482,8.09571729 C11.9639911,7.84804124 12.6440277,8.09876214 12.9443806,8.65660546 Z M21.9927179,8.0965106 C22.5944431,8.34575332 22.901252,9.00622556 22.7223674,9.61735025 L22.6765314,9.74738237 L21.685189,12.023073 C21.4181432,12.6677785 20.6790228,12.9739322 20.0343172,12.7068865 C19.4325921,12.4576437 19.1257831,11.7971715 19.3046677,11.1860468 L19.3505037,11.0560147 L20.3418462,8.78032408 C20.6088919,8.13561855 21.3480124,7.82946483 21.9927179,8.0965106 Z"
                              id="🎨-Color">

                        </path>
                    </g>
                </g>
            </svg>
        </button>
        <button class="content" on:click={toggleShowContent} class:active={$showContent}>Internet Explorer</button>
    </div>
    <div class="system-tray">
        <label>
            <svg fill={color} height="20px" width="20px" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                 viewBox="0 0 324.99 324.99" xml:space="preserve">
                <g>
                    <path d="M307.6,129.885c-11.453-11.447-23.783-16.778-38.805-16.778c-6.189,0-12.056,0.858-17.729,1.688
                        c-5.094,0.745-9.905,1.449-14.453,1.45c-8.27,0-14.197-2.397-19.82-8.017c-10.107-10.101-8.545-20.758-6.569-34.25
                        c2.357-16.096,5.291-36.127-15.101-56.508C183.578,5.932,167.848,0.081,148.372,0.081c-37.296,0-78.367,21.546-99.662,42.829
                        C17.398,74.205,0.1,115.758,0,159.917c-0.1,44.168,17.018,85.656,48.199,116.82c31.077,31.061,72.452,48.168,116.504,48.171
                        c0.005,0,0.007,0,0.013,0c44.315,0,86.02-17.289,117.428-48.681c17.236-17.226,32.142-44.229,38.9-70.471
                        C329.291,173.738,324.517,146.793,307.6,129.885z M309.424,202.764c-6.16,23.915-20.197,49.42-35.763,64.976
                        c-29.145,29.129-67.833,45.17-108.946,45.169c-0.002,0-0.009,0-0.011,0c-40.849-0.003-79.211-15.863-108.023-44.659
                        C27.777,239.36,11.908,200.896,12,159.944c0.092-40.962,16.142-79.512,45.191-108.545c19.071-19.061,57.508-39.317,91.18-39.317
                        c16.18,0,29.056,4.669,38.269,13.877c16.127,16.118,13.981,30.769,11.71,46.28c-2.067,14.116-4.41,30.115,9.96,44.478
                        c7.871,7.866,16.864,11.529,28.304,11.528c5.421-0.001,10.895-0.802,16.189-1.576c5.248-0.768,10.676-1.562,15.992-1.562
                        c7.938,0,18.557,1.508,30.322,13.267C317.724,156.971,313.562,186.699,309.424,202.764z"/>
                    <path d="M142.002,43.531c-1.109,0-2.233,0.065-3.342,0.192c-15.859,1.824-27.33,16.199-25.571,32.042
                        c1.613,14.631,13.93,25.665,28.647,25.665c1.105,0,2.226-0.065,3.332-0.191c15.851-1.823,27.326-16.191,25.581-32.031
                        C169.032,54.57,156.716,43.531,142.002,43.531z M143.7,89.317c-0.652,0.075-1.313,0.113-1.963,0.113
                        c-8.59,0-15.778-6.441-16.721-14.985c-1.032-9.296,5.704-17.729,15.016-18.8c0.655-0.075,1.317-0.114,1.971-0.114
                        c8.587,0,15.775,6.446,16.72,14.993C159.747,79.816,153.006,88.247,143.7,89.317z"/>
                    <path d="M102.997,113.64c-1.72-7.512-6.261-13.898-12.784-17.984c-4.597-2.881-9.889-4.404-15.304-4.404
                        c-10.051,0-19.254,5.079-24.618,13.587c-4.14,6.566-5.472,14.34-3.75,21.888c1.715,7.52,6.261,13.92,12.799,18.018
                        c4.596,2.88,9.888,4.402,15.303,4.402c10.051,0,19.255-5.078,24.624-13.593C103.401,128.975,104.726,121.193,102.997,113.64z
                         M89.111,129.16c-3.153,5.001-8.563,7.986-14.469,7.986c-3.158,0-6.246-0.889-8.93-2.57c-3.817-2.393-6.471-6.128-7.472-10.518
                        c-1.008-4.417-0.227-8.97,2.2-12.819c3.153-5.001,8.562-7.987,14.468-7.987c3.158,0,6.246,0.89,8.933,2.573
                        c3.806,2.384,6.454,6.11,7.458,10.493C92.312,120.743,91.534,125.306,89.111,129.16z"/>
                    <path d="M70.131,173.25c-3.275,0-6.516,0.557-9.63,1.654c-15.055,5.301-23.05,21.849-17.821,36.892
                        c4.032,11.579,14.984,19.358,27.254,19.358c3.276,0,6.517-0.556,9.637-1.652c15.065-5.301,23.053-21.854,17.806-36.896
                        C93.346,181.029,82.397,173.25,70.131,173.25z M75.589,218.182c-1.836,0.646-3.738,0.973-5.655,0.973
                        c-7.168,0-13.566-4.543-15.921-11.302c-3.063-8.814,1.636-18.518,10.476-21.63c1.83-0.645,3.729-0.973,5.643-0.973
                        c7.165,0,13.56,4.542,15.914,11.304C89.12,205.37,84.429,215.072,75.589,218.182z"/>
                    <path d="M140.817,229.415c-3.071-1.066-6.266-1.606-9.496-1.606c-12.307,0-23.328,7.804-27.431,19.429
                        c-2.566,7.317-2.131,15.185,1.229,22.151c3.349,6.943,9.204,12.163,16.486,14.696c3.075,1.071,6.274,1.614,9.51,1.614
                        c12.3,0,23.314-7.811,27.409-19.439c2.574-7.31,2.143-15.175-1.216-22.145C153.958,237.165,148.103,231.945,140.817,229.415z
                         M147.206,262.275c-2.407,6.834-8.873,11.425-16.091,11.425c-1.888,0-3.759-0.318-5.563-0.947c-4.253-1.48-7.67-4.524-9.623-8.575
                        c-1.965-4.074-2.219-8.68-0.718-12.957c2.408-6.825,8.883-11.411,16.11-11.411c1.888,0,3.759,0.317,5.561,0.942
                        c4.248,1.475,7.663,4.52,9.616,8.573C148.46,253.399,148.711,257.998,147.206,262.275z"/>
                    <path d="M212.332,213.811c-5.466,0-10.81,1.55-15.448,4.479c-13.525,8.521-17.652,26.427-9.193,39.927
                        c5.315,8.445,14.463,13.488,24.469,13.488c5.458,0,10.796-1.545,15.434-4.464c13.541-8.507,17.663-26.419,9.19-39.926
                        C231.486,218.86,222.345,213.811,212.332,213.811z M221.205,257.082c-2.725,1.715-5.853,2.622-9.045,2.622
                        c-5.857,0-11.207-2.946-14.307-7.87c-4.947-7.896-2.513-18.39,5.433-23.395c2.724-1.72,5.852-2.629,9.047-2.629
                        c5.854,0,11.192,2.944,14.283,7.878C231.577,241.597,229.151,252.09,221.205,257.082z"/>
                    <path d="M255.384,141.998c-1.06-0.117-2.134-0.176-3.194-0.176c-14.772,0-27.174,11.068-28.846,25.747
                        c-0.876,7.698,1.297,15.266,6.118,21.311c4.812,6.03,11.686,9.821,19.369,10.676c1.053,0.114,2.12,0.173,3.175,0.173
                        c14.754,0,27.164-11.067,28.869-25.748c0.886-7.688-1.277-15.247-6.091-21.288C269.97,146.651,263.082,142.853,255.384,141.998z
                         M268.955,172.602c-1.001,8.624-8.287,15.127-16.948,15.127c-0.621,0-1.251-0.034-1.86-0.101c-4.48-0.498-8.494-2.712-11.303-6.231
                        c-2.819-3.534-4.089-7.963-3.575-12.47c0.98-8.611,8.255-15.104,16.922-15.104c0.623,0,1.256,0.035,1.875,0.104
                        c4.498,0.499,8.523,2.717,11.334,6.244C268.209,163.697,269.472,168.114,268.955,172.602z"/>
                </g>
            </svg>
            <input class="hidden" name="color" type="color" bind:value={color}/>
        </label>
        <Clock/>
    </div>
</div>

<style lang="scss">
  .taskbar {
    width: 100%;
    position: absolute;
    bottom: 0;
    left: 0;
    display: flex;
    align-items: center;
    //gap: 10px;
    justify-content: space-between;
    background-color: #c0c0c0;
    border-top: 2px solid #fff;
    border-left: 2px solid #fff;
    border-right: 2px solid #808080;
    border-bottom: 2px solid #808080;
    height: 40px;
    font-family: 'dungGeunMo', serif;

    .start-button {
      background-color: #c0c0c0;
      color: #000;
      padding: 2px 10px;
      border: 2px solid #fff;
      border-top: 2px solid #808080;
      border-left: 2px solid #808080;
      cursor: pointer;
      display: flex;
      align-items: center;
      transition: 0.2s;

      &.active {
        background-color: #000080;
        border-top: 2px solid #808080;
        border-left: 2px solid #808080;
        border-right: 2px solid #fff;
        border-bottom: 2px solid #fff;
        color: #fff;
      }

      .windows-icon {
        margin-right: 5px;
      }
    }

    .task-items {
      flex-grow: 1;
      display: flex;
      align-items: center;
      padding: 0 10px;
      gap: 5px;

      button {
        display: block;
        height: 100%;
        box-sizing: border-box;
        border: 2px solid transparent;
        padding: 1px;

        &.content {
          padding: 5px;
        }

        &.active {
          background-color: #c0c0c0;
          border-top: 2px solid #808080;
          border-left: 2px solid #808080;
          border-right: 2px solid #fff;
          border-bottom: 2px solid #fff;
          color: #000;
        }
      }
    }

    .system-tray {
      display: flex;
      align-items: center;
      gap: 5px;

    }
  }
</style>
